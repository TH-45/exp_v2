## 目标说明

- **目标**：完整支撑招投标全流程，又能体现你对微服务、权限、审计等工程能力的掌握。  
- **核心展示点**：  
  - 精简微服务架构（Nacos + Gateway + Feign）。  
  - 完整 RBAC + 数据权限。  
  - 招投标 / 合同 / 项目进度的流程管理。  
  - 文件与资质管理、Excel 导入导出、操作审计日志。  

---

## 一、技术栈与各自作用（记清楚用途）

### 1. 后端与微服务

- **Spring Boot**
  - **作用**：快速构建单个服务应用，简化配置，内置 Tomcat。
  - **在项目中**：每一个业务服务（系统 / 权限、招投标合同、项目等）都是一个 Spring Boot 应用。

- **Spring Cloud（精简使用）**
  - **作用**：微服务体系的“胶水”，负责服务注册发现、配置管理、网关转发、服务间调用等。
  - **在项目中**：
    - 通过 Nacos 管理服务注册与配置。
    - 通过 Gateway 实现统一入口、路由、鉴权。
    - 通过 OpenFeign 实现服务间调用。

- **Nacos（注册中心 + 配置中心）**
  - **作用**：
    - 注册中心：记录有哪些服务在线，它们的地址。
    - 配置中心：统一管理配置（数据库连接、开关配置等），动态刷新。
  - **在项目中**：
    - 所有业务服务都向 Nacos 注册。
    - 将公共配置（数据库、Redis、JWT 配置等）放入 Nacos 统一管理。

- **Spring Cloud Gateway（网关）**
  - **作用**：所有前端请求先经过网关，再由网关转发到各个服务；可统一做鉴权、限流、日志等。
  - **在项目中**：
    - 统一入口：`/api/**` → 路由到不同服务。
    - 在网关层解析 JWT，做基本权限 / 黑名单校验。

- **OpenFeign**
  - **作用**：以“接口调用”的方式写服务间 HTTP 调用，简化代码。
  - **在项目中**：
    - 例如：招投标服务需要根据用户 ID 查询部门 / 角色，由 Feign 调用系统服务。

### 2. 数据访问与存储

- **JPA + Spring Data JPA**
  - **作用**：ORM 映射，基于实体类快速生成增删改查接口。
  - **在项目中**：
    - 所有业务实体（用户、部门、角色、投标、合同、项目进度等）通过 JPA 与 MySQL 映射。
    - 用 `JpaRepository` + `@Query` 或 `Specification` 支持复杂条件查询。

- **MySQL**
  - **作用**：关系型数据库，存放核心业务数据。
  - **在项目中**：
    - 存储组织结构、账号、权限、招投标、合同、项目、日志等所有业务数据。

- **Redis**
  - **作用**：缓存与高频访问数据存储。
  - **在项目中**：
    - 存放登录会话 / Token 黑名单、验证码、常用字典数据、部分查询结果。
    - 后续可以扩展为限流、分布式锁等。

### 3. 安全与权限

- **Spring Security**
  - **作用**：安全框架，提供认证（登录）、鉴权（权限控制）、过滤器链。
  - **在项目中**：
    - 实现账号密码登录、JWT 校验。
    - 基于角色 / 权限码控制接口访问：`@PreAuthorize("hasAuthority('bid:edit')")`。

- **JWT（JSON Web Token）**
  - **作用**：无状态认证令牌，用于前后端分离登录态。
  - **在项目中**：
    - 用户登录成功后签发 JWT，前端每次请求在 Header 中携带。
    - 网关或系统服务解析 JWT，识别用户身份与权限信息。

### 4. 文件与导入导出

- **文件存储（本地文件夹 或 MinIO）**
  - **作用**：文件 / 附件存储，管理合同文件、招标文件、资质扫描件等。
  - **在项目中**：
    - 封装统一 `FileService`，支持上传、下载、删除。
    - 文件元数据存数据库（路径、类型、所属业务 ID、创建人等）。

- **EasyExcel（或 Apache POI 封装）**
  - **作用**：快速导入导出 Excel。
  - **在项目中**：
    - 投标信息导出、人员信息导出、项目进度导出。
    - 投标信息批量导入、人员批量导入。

### 5. 日志、审计与文档

- **AOP + 注解**
  - **作用**：对特定业务操作进行切面拦截，记录审计日志。
  - **在项目中**：
    - 对重要操作（招标发布、合同审批、权限变更等）加注解。
    - 切面统一记录用户、时间、操作类型、对象 ID 等。

- **Swagger / Knife4j**
  - **作用**：在线接口文档，便于联调与论文展示。
  - **在项目中**：
    - 各服务暴露 `/swagger-ui` / `doc.html`，自动生成 API 文档。

### 6. 前端

- **Vue 3 + TypeScript + Vite**
  - **作用**：构建前端单页应用，提升开发效率和可维护性。
  - **在项目中**：
    - 按模块划分页面：招投标管理、合同管理、组织权限、企业信息、项目管理。
    - 状态管理（如 Pinia / Vuex）存放登录用户信息和权限。

- **Element Plus**
  - **作用**：UI 组件库，提供表单、表格、弹窗、树、标签页等。
  - **在项目中**：
    - 快速构建管理后台界面：表格 + 搜索栏 + 分页 + 弹窗编辑。

- **ECharts**
  - **作用**：数据可视化。
  - **在项目中**：
    - 用于展示项目进度、招标数量统计、合同金额统计等。

---

## 二、系统模块与开发重点

### 1. 系统 / 权限服务（auth-system-service）

- **主要功能**：
  - 部门与组织架构：树形结构（集团 / 公司 / 部门 / 项目部）。
  - 岗位管理：岗位与部门关联，岗位默认权限。
  - 角色与权限管理：菜单权限、按钮 / 接口权限、数据权限范围。
  - 人员信息管理：人员与账号、部门、岗位、角色关联。
  - 账号登录、状态管理（在职 / 离职 / 停用联动账号）。

- **开发重点**：
  - 设计合理的表结构：`user`、`dept`、`role`、`menu`、`post`、中间表等。
  - 实现 RBAC 权限模型：
    - 菜单树 + 前端路由控制。
    - 接口级权限注解。
  - 数据权限：
    - 用户的数据范围配置：本部门 / 本公司 / 指定项目等。
    - 通过 AOP 在查询时自动拼 where 条件。

### 2. 招投标与合同服务（bid-contract-service）

- **主要功能**：
  - 投标管理：录入、编辑、查询、导出、进度跟踪。
  - 招标管理：公告发布、文件上传、投标人资格审核、评标记录。
  - 合同管理：起草、审核、签署、归档；履约跟踪。

- **开发重点**：
  - 设计状态机式字段：如投标（草稿 / 已提交 / 中标 / 未中标）、合同（起草 / 审核中 / 已签署 / 归档）。
  - 整合文件管理：招标文件、投标文件、合同附件。
  - 对关键节点写入审计日志：谁在什么时候通过 / 驳回了审核。

### 3. 企业信息服务（corp-service）

- **主要功能**：
  - 企业内部信息：账号信息补充、制度与公告。
  - 企业外部信息：资质信息（上传、分类、过期提醒）、基础信息、合作单位。

- **开发重点**：
  - 资质信息与投标项目的关联。
  - 资质过期提醒（定时任务 + 消息通知）。
  - 制度与公告的发布、修改，按权限范围可见。

### 4. 工程项目服务（project-service）

- **主要功能**：
  - 人员配置管理：项目团队组建，人员与项目的角色关联。
  - 物料配置管理：物料需求录入、采购关联、库存预警。
  - 项目进度管理：计划制定、里程碑、进度更新、延期提醒、可视化展示。

- **开发重点**：
  - 项目与人员 / 岗位 / 部门之间的多对多关系。
  - 进度结构设计：项目 → 阶段 → 里程碑 / 任务。
  - 用 ECharts 做项目进度图表，支持基础筛选、统计。

---

## 三、建议的开发路线（从零到可演示）

### 阶段 0：环境与骨架（约 1 周）

- **后端**：
  - 搭建父工程（Maven / Gradle），拆分子模块：`gateway`、`auth-system-service`、`bid-contract-service`、`project-service`、`corp-service`、`common`。
  - 集成 Nacos（注册中心 + 配置中心），所有服务注册到 Nacos。
  - 配置 Gateway 路由到各服务。
- **前端**：
  - 初始化 Vue3 + TS + Vite + Element Plus 项目。
  - 搭出基础布局：登录页 + 后台主体框架 + 菜单栏。

### 阶段 1：系统 / 权限服务优先（约 2 周）

- **数据库设计与实现**：
  - 设计并建表：用户、部门、岗位、角色、菜单、权限、数据范围。
- **后端开发**：
  - 完成登录（Spring Security + JWT）。
  - 实现用户 / 部门 / 岗位 / 角色 / 菜单的 CRUD。
  - 实现角色绑定菜单权限、接口权限。
  - 实现数据权限（AOP 做数据过滤）。
- **前端开发**：
  - 登录流程打通。
  - 后台根据角色动态生成菜单。
  - 部门树、用户管理、角色管理页面。

### 阶段 2：招投标与合同（约 2～3 周）

- **数据库与实体**：
  - 设计招投标相关表：招标项目、投标记录、投标人、评标记录等。
  - 设计合同相关表：合同基本信息、合同状态、关联的招投标项目。
- **后端开发**：
  - 投标信息增删改查 + 多条件查询 + 导出（先实现导出）。
  - 招标公告发布、招标文件上传（集成文件服务）。
  - 资格审核、评标过程记录。
  - 合同起草 - 审核 - 签署 - 归档的状态流转接口。
  - 关键流程写入审计日志。
- **前端开发**：
  - 投标管理、招标管理、合同管理三大页面。
  - 列表 + 筛选 + 弹窗编辑 + 详情页。

### 阶段 3：企业信息与项目服务（约 2～3 周）

- **企业信息服务**：
  - 资质信息增删改查 + 上传附件 + 关联投标项目。
  - 资质到期提醒（定时任务 + 消息表 + 前端提醒）。
  - 制度 / 公告的发布与展示，结合角色 / 部门控制可见范围。

- **项目服务**：
  - 项目基础信息管理。
  - 项目人员配置（多对多关联）。
  - 项目进度结构与 CRUD。
  - 延期提醒逻辑（定时任务）。

- **前端**：
  - 企业资质管理、制度公告页。
  - 项目列表、项目详情、团队成员配置页。
  - 项目进度图表页（ECharts）。

### 阶段 4：横切能力完善（约 1～2 周）

- **文件服务**：
  - 统一封装上传 / 下载接口，分类管理招标文件、合同附件、资质附件等。
- **Excel 导入导出**：
  - 投标信息导出。
  - 人员 / 组织结构导出。
  - 至少实现 1～2 个导入功能（如人员批量导入、投标记录导入）。

- **日志与审计**：
  - 完善 AOP 审计日志，对招标发布、合同审核、权限变更等操作打点。
  - 增加查看审计日志的后台界面。

- **接口文档与异常处理**：
  - 使用 Swagger / Knife4j 整理接口文档。
  - 统一异常处理返回标准响应格式。

### 阶段 5：优化与论文准备（约 1～2 周）

- **系统层面**：
  - 清理无用代码、统一风格。
  - 补充少量单元测试或接口自动化测试（可选）。
- **文档 / 论文准备**：
  - 导出并整理架构图、模块划分图、数据库 E-R 图。
  - 按照功能模块撰写“设计与实现”章节。
  - 在“总结与展望”中写微服务扩展方向，例如 MQ、分布式事务、链路追踪等。

---

## 四、开发时特别要记住的重点

- **一定要做深的地方**：
  - **权限体系**：角色 + 菜单 + 按钮 + 数据权限，这是最能体现“工程水平”的部分。
  - **流程状态**：招投标、合同、项目进度不要只做 CRUD，要有清晰的状态流转。
  - **文件 & 资质管理**：文件上传下载 + 资质与投标项目关联 + 到期提醒。
  - **Excel 导入导出 & 审计日志**：是很好的“亮点加分”功能。

- **可以减配但在论文中写设计的地方**：
  - 完整的分布式事务（可以只写预留方案）。
  - 消息队列（可以用于提醒，但实在来不及可用定时任务代替）。


